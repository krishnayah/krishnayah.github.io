import{t as k,a as q}from"./index.f0c96418.js";import{u as z}from"./scheduler.2807654d.js";function D(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function E(e,w){k(e,1,1,()=>{w.delete(e.key)})}function F(e,w,l,u,x,o,s,M,m,a,t,p){let f=e.length,d=o.length,h=f;const v={};for(;h--;)v[e[h].key]=h;const y=[],S=new Map,T=new Map,b=[];for(h=d;h--;){const n=p(x,o,h),i=l(n);let c=s.get(i);c?u&&b.push(()=>c.p(n,w)):(c=a(i,n),c.c()),S.set(i,y[h]=c),i in v&&T.set(i,Math.abs(h-v[i]))}const A=new Set,j=new Set;function _(n){q(n,1),n.m(M,t),s.set(n.key,n),t=n.first,d--}for(;f&&d;){const n=y[d-1],i=e[f-1],c=n.key,g=i.key;n===i?(t=n.first,f--,d--):S.has(g)?!s.has(c)||A.has(c)?_(n):j.has(g)?f--:T.get(c)>T.get(g)?(j.add(c),_(n)):(A.add(g),f--):(m(i,s),f--)}for(;f--;){const n=e[f];S.has(n.key)||m(n,s)}for(;d;)_(y[d-1]);return z(b),y}globalThis&&globalThis.__awaiter;export{D as e,E as o,F as u};
